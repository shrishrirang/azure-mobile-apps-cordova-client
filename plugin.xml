<?xml version="1.0" encoding="UTF-8"?>
<!--
 Copyright (c) Microsoft Open Technologies, Inc.  All Rights Reserved.
 Licensed under the Apache License, Version 2.0.  See License.txt in the project root for license information.
-->
<plugin xmlns="http://apache.org/cordova/ns/plugins/1.0"
           id="cordova-plugin-ms-azure-mobile-apps"
      version="2.0.0">
    <name>Azure Mobile Apps</name>
    <description>This library enables you to develop scalable and secure cordova mobile apps hosted in Microsoft Azure. You can incorporate structured storage, user authentication and push notifications in minutes. For more information, check out http://azure.microsoft.com/en-us/documentation/articles/app-service-mobile-value-prop-preview</description>
    <license>Apache 2.0</license>
    <keywords>azure, services, zumo, cloud</keywords>
    <repo>https://github.com/azure/azure-mobile-apps-cordova-client</repo>
    <issue>https://github.com/azure/azure-mobile-apps-js-client/issues</issue>

    <dependency id="cordova-sqlite-storage@1.4.8"/>

    <platform name="windows8">
        <js-module src="www/MobileServices.Cordova.js" name="cordova-bundle">
            <runs />
        </js-module>
        <js-module src="www/index.js" name="AzureMobileServices">
            <clobbers target="WindowsAzure" />
        </js-module>
    </platform>

    <platform name="windows">
        <js-module src="www/MobileServices.Cordova.js" name="cordova-bundle">
            <runs />
        </js-module>
        <js-module src="www/index.js" name="AzureMobileServices">
            <clobbers target="WindowsAzure" />
        </js-module>
    </platform>

    <platform name="wp8">
        <js-module src="www/MobileServices.Cordova.js" name="cordova-bundle">
            <runs />
        </js-module>
        <js-module src="www/index.js" name="AzureMobileServices">
            <clobbers target="WindowsAzure" />
        </js-module>
    </platform>

    <platform name="ios">
        <!-- This should match the value defined in easyauth.m -->
        <preference name="EASYAUTH_APPID" default="default-easyauth-app-id" />
        <config-file parent="/*" target="config.xml">
            <feature name="EasyAuth">
                <param name="ios-package" value="EasyAuth" />
            </feature>
        </config-file>
        <!-- This should match the value defined in easyauth.m -->
        <config-file target="*-Info.plist" parent="com.microsoft.azure.easyauth.appid">
            <string>$EASYAUTH_APPID</string>
        </config-file>
        <config-file target="*-Info.plist" parent="CFBundleURLTypes">
            <array>
                <dict>
                    <key>CFBundleURLName</key>
                    <string>com.microsoft.azure.easyauth</string>
                    <key>CFBundleURLSchemes</key>
                    <array>
                            <string>$EASYAUTH_APPID</string>
                    </array>
                </dict>
            </array>
        </config-file>
        <js-module src="www/MobileServices.Cordova.js" name="cordova-bundle">
            <runs />
        </js-module>
        <js-module src="www/index.js" name="AzureMobileServices">
            <clobbers target="WindowsAzure" />
        </js-module>
        <source-file src="src/ios/easyauth.m" />
        <framework src="src/ios/AzureEasyAuth.framework" custom="true" />
    </platform>

    <platform name="android">
        <js-module src="www/MobileServices.Cordova.js" name="cordova-bundle">
            <runs />
        </js-module>
        <js-module src="www/index.js" name="AzureMobileServices">
            <clobbers target="WindowsAzure" />
        </js-module>
    </platform>

    <platform name="browser">
        <js-module src="www/MobileServices.Cordova.js" name="cordova-bundle">
            <runs />
        </js-module>
        <js-module src="www/index.js" name="AzureMobileServices">
            <clobbers target="WindowsAzure" />
        </js-module>
    </platform>
</plugin>
